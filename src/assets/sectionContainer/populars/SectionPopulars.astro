---
import SectionContainer from "../components/SectionContainer.astro";
import CardMovies from "../components/CardMovies.astro";
import { linksApi } from "../../../lib/data/DataLinks";
import { type General } from "../../../lib/data/DataMovie";

const urlApi = `${linksApi.base}/movie/popular${linksApi.key}&language=en-US&page=1`;
let infoMovies = {} as General;

try {
  const response = await fetch(urlApi);
  const data = await response.json();
  infoMovies = data;
} catch (error) {
  console.error(error);
}
---

<SectionContainer titleSec="pelÃ­culas populares">
  {
    infoMovies?.results.map((el) => (
      <CardMovies titleCard={el.title} poster={el.poster_path} />
    ))
  }
</SectionContainer>
